{
	"name": "Interactive Data Maps",
	"version": "0.16.1",

	"author": [
		"alex4401"
	],
	"url": "https://mediawiki.org/wiki/Extension:DataMaps",
	"descriptionmsg": "datamap-desc",
	"license-name": "GPL-2.0-or-later",
	"type": "parserhook",

	"requires": {
		"MediaWiki": ">= 1.39.0",
		"platform": {
			"php": ">= 7.4"
		}
	},

	"MessagesDirs": {
		"DataMaps": [
			"i18n/core",
			"i18n/createmap",
			"i18n/ve"
		]
	},
	"ExtensionMessagesFiles": {
		"DataMapsMagic": "i18n/Magic.php"
	},

	"TrackingCategories": [
		"datamap-category-pages-including-maps",
		"datamap-category-maps-failing-validation",
		"datamap-category-pages-including-broken-maps"
	],

	"namespaces": [
		{
			"id": 2900,
			"constant": "NS_MAP",
			"name": "Map",
			"defaultcontentmodel": "wikitext",
			"subpages": true,
			"conditional": true
		},
		{
			"id": 2901,
			"constant": "NS_MAP_TALK",
			"name": "Map_talk",
			"subpages": true,
			"conditional": true
		}
	],

	"ResourceFileModulePaths": {
		"localBasePath": "modules",
		"remoteExtPath": "DataMaps/modules"
	},

	"ResourceModules": {
		"ext.datamaps.leaflet": {
			"es6": true,
			"packageFiles": [
				"leafletPkg/index.js",
				"vendor/leaflet/leaflet.js",
				"leafletPkg/popup.js",
				"leafletPkg/interaction.js",
				"leafletPkg/pinIcon.js"
			],
			"styles": [
				"vendor/leaflet/leaflet.css"
			],
			"messages": [
				"datamap-interact-touch",
				"datamap-interact-scroll",
				"datamap-interact-scroll-mac"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.icons": {
			"class": "ResourceLoaderOOUIIconPackModule",
			"icons": [
				"exitFullscreen",
				"fullScreen",
				"imageLayoutFrame",
				"alignCenter",
				"expand",
				"link",
				"search",
				"edit",
				"funnel"
			]
		},

		"ext.datamaps.core.styles": {
			"styles": [
				"core/css/early.less"
			],
			"targets": [ "desktop", "mobile" ]
		},
		"ext.datamaps.core": {
			"es6": true,
			"dependencies": [
				"mediawiki.api",
				"ext.datamaps.icons"
			],
			"packageFiles": [
				"core/index.js",
				"core/enums.js",
				"core/events.js",
				"core/storage.js",
				"core/stream.js",
				"core/layerManager.js",
				"core/map.js",
				"core/controls.js",
				"core/popup.js",
				"core/util.js",

				"core/legend/tabber.js",
				"core/legend/filters.js",
				"core/legend/collectibles.js",

				{
					"name": "core/settings.json",
					"callback": "MediaWiki\\Extension\\DataMaps\\HookHandler::getJsConfig"
				}
			],
			"styles": [
				"core/css/interactive.less"
			],
			"messages": [
				"datamap-loading-data",
				"datamap-error-dataload",
				"datamap-legend-label",
				"datamap-legend-tab-locations",
				"datamap-legend-tab-checklist",
				"datamap-toggle-show-all",
				"datamap-toggle-hide-all",
				"datamap-toggle-caves",
				"datamap-layer-control",
				"datamap-layer-surface",
				"datamap-layer-cave",
				"datamap-popup-related-article",
				"datamap-popup-dismissed",
				"datamap-popup-mark-as-dismissed",
				"datamap-popup-marker-link-get",
				"datamap-popup-marker-link-copied",
				"datamap-coordinate-control-text",
				"datamap-coordinate-control-text-xy",
				"datamap-control-zoom-in",
				"datamap-control-zoom-out",
				"datamap-control-toggle-legend",
				"datamap-control-reset-view",
				"datamap-control-centre-view",
				"datamap-control-edit",
				"datamap-control-fullscreen",
				"datamap-checklist-prelude"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.bootstrap": {
			"es6": true,
			"dependencies": [
				"ext.datamaps.core"
			],
			"packageFiles": [
				"bootstrap/main.js"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.site": {
			"class": "MediaWiki\\ResourceLoader\\WikiModule",
			"scripts": [
				"MediaWiki:DataMaps.js"
			],
			"styles": [
				"MediaWiki:DataMaps.css"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.inlineloader": {
			"es6": true,
			"dependencies": [
				"ext.datamaps.core",
				"ext.datamaps.bootstrap"
			],
			"packageFiles": [
				"inlineLoader/main.js"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.fuzzysort": {
			"packageFiles": [
				"vendor/fuzzysort/fuzzysort.min.js"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.search": {
			"es6": true,
			"dependencies": [
				"oojs-ui-core",
				"oojs-ui-widgets",
				"ext.datamaps.core",
				"ext.datamaps.bootstrap",
				"ext.datamaps.leaflet",
				"ext.datamaps.fuzzysort"
			],
			"packageFiles": [
				"search/main.js",
				"search/indexing.js",
				"search/util.js"
			],
			"styles": [
				"search/css/styles.less"
			],
			"messages": [
				"datamap-control-search",
				"datamap-control-search-toggle-sharing",
				"datamap-control-search-no-results"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.datamaps.ve.icons": {
			"class": "ResourceLoaderOOUIIconPackModule",
			"icons": [
				"mapPin",
				"trash",
				"edit",

				"code",
				"noWikiText",
				"wikiText",
				"check",
				"close",
				"menu",
				"required",
				"trash",
				"speechBubbleAdd"
			]
		},

		"ext.datamaps.ve": {
			"es6": true,
			"dependencies": [
				"oojs-ui-core",
				"oojs-ui-widgets",
				"oojs-ui-windows",
				"mediawiki.widgets",
				"mediawiki.widgets.visibleLengthLimit",
				"ext.datamaps.core",
				"ext.datamaps.bootstrap",
				"ext.datamaps.leaflet",
				"ext.datamaps.ve.icons"
			],
			"packageFiles": [
				"ve/main.js",
				"ve/editor.js",
				"ve/dataCapsule.js",
				"ve/dataEditorUi.js",
				"ve/toolControl.js",
				"ve/editablePopup.js",

				"ve/tabs/base.js",
				"ve/tabs/markerGroups.js",
				"ve/tabs/mapSettings.js",

				"ve/workflow/base.js",
				"ve/workflow/createMarker.js",
				"ve/workflow/saveEdit.js",

				"ve/ooui/NamedPageLayout.js"
			],
			"styles": [
				"ve/css/main.less"
			],
			"messages": [
				"datamap-ve-beta-notice",
				"datamap-ve-limited-preview-notice",

				"datamap-ve-field-locked-unknown-value",

				"datamap-ve-panel-msettings",
				"datamap-ve-panel-msettings-field-coordorder",
				"datamap-ve-panel-msettings-field-coordorder-latlon",
				"datamap-ve-panel-msettings-field-coordorder-xy",
				"datamap-ve-panel-msettings-field-search",
				"datamap-ve-panel-msettings-field-search-disabled",
				"datamap-ve-panel-msettings-field-search-enabled",
				"datamap-ve-panel-msettings-field-search-tabber",
				"datamap-ve-panel-msettings-field-legend",
				"datamap-ve-panel-msettings-field-requireids",
				"datamap-ve-panel-msettings-field-requireids-desc",
				"datamap-ve-panel-msettings-field-sortchecklists",
				"datamap-ve-panel-msettings-field-sortchecklists-default",
				"datamap-ve-panel-msettings-field-sortchecklists-amount",
				"datamap-ve-panel-msettings-field-coordinates",
			
				"datamap-ve-panel-mgroups",

				"datamap-ve-panel-marker-delete",
				"datamap-ve-panel-marker-field-name",
				"datamap-ve-panel-marker-field-desc",
				"datamap-ve-panel-marker-advanced",
				"datamap-ve-panel-marker-field-id",

				"datamap-ve-workflow-save",
				"datamap-ve-workflow-save-submit",
				"datamap-ve-workflow-save-summary",
				"datamap-ve-workflow-save-summary-desc",

				"datamap-ve-group-id",
				"datamap-ve-group-id-cannot-modify",
				"datamap-ve-group-article-link",
				"datamap-ve-group-article-link-subtext",
				"datamap-ve-group-collectible-mode",

				"datamap-ve-legend-tab-marker-layers",

				"datamap-ve-cancel",
				"datamap-ve-tool-delete",
				"datamap-ve-tool-source-editor",
				"datamap-ve-tool-commit",
				"datamap-ve-tool-commit-continue",
				"datamap-ve-tool-commit-edit-summary",
				"datamap-ve-tool-commit-edit-summary-subtext",

				"datamap-ve-dialog-beta-warning",
				"datamap-ve-dialog-beta-warning-text",

				"datamap-ve-tool-add-marker",
				"datamap-ve-tool-add-marker-continue"
			],
			"targets": [ "desktop" ]
		},

		"ext.datamaps.createMap": {
			"es6": true,
			"dependencies": [
				"oojs-ui-core",
				"oojs-ui-widgets",
				"oojs-ui-windows",
				"mediawiki.widgets",
				"mediawiki.Uri",
				"ext.datamaps.ve.icons"
			],
			"packageFiles": [
				"createMap/main.js",
				"createMap/creationDialog.js",
				"core/enums.js",

				{
					"name": "config.json",
					"callback": "MediaWiki\\Extension\\DataMaps\\HookHandler::getCreateMapConfig"
				}
			],
			"styles": [
				"ve/css/collapsibles.less",
				"createMap/css/all.less"
			],
			"messages": [
				"datamap-vec-beta-notice",

				"datamap-ve-cancel",
				"datamap-ve-skip",
				"datamap-vec-title",
				"datamap-vec-intro",
				"datamap-vec-select-crs-origin",
				"datamap-vec-crs-top-left",
				"datamap-vec-crs-bottom-left",
				"datamap-vec-select-crs",
				"datamap-vec-crs-percent",
				"datamap-vec-crs-image",
				"datamap-vec-crs-custom",
				"datamap-vec-select-background",
				"datamap-vec-note-image-size",
				"datamap-vec-error-bad-file-type",
				"datamap-vec-error-poor-file-type",
				"datamap-vec-extra-options",
				"datamap-vec-toggle-coord-display",
				"datamap-vec-toggle-zoom",
				"datamap-vec-toggle-search",
				"datamap-vec-toggle-search-tabber",
				"datamap-vec-toggle-uid-requirement",
				"datamap-vec-submit",
				"datamap-vec-example-group-id",
    			"datamap-vec-example-group-name",
    			"datamap-vec-example-marker"
			],
			"targets": [ "desktop" ]
		},

		"ext.datamaps.createMapLazy": {
			"es6": true,
			"packageFiles": [
				"createMapLazy/main.js"
			],
			"targets": [ "desktop" ]
		}
	},

	"AutoloadNamespaces": {
		"MediaWiki\\Extension\\DataMaps\\": "includes/"
	},

	"APIModules": {
		"queryDataMap": "MediaWiki\\Extension\\DataMaps\\API\\ApiQueryDataMapEndpoint"
	},
	"ContentHandlers": {
		"datamap": "MediaWiki\\Extension\\DataMaps\\Content\\DataMapContentHandler"
	},
	
	"callback": "MediaWiki\\Extension\\DataMaps\\HookHandler::onRegistration",
	"Hooks": {
		"ParserFirstCallInit": "MainHandler",
		"ContentHandlerDefaultModelFor": "MainHandler",
		"CanonicalNamespaces": "MainHandler",
		"GetPreferences": "MainHandler",
		"SkinTemplateNavigation::Universal": "MainHandler",
		"ChangeTagsListActive": "MainHandler",
		"ListDefinedTags": "MainHandler",
		"ChangeTagsAllowedAdd": "MainHandler",
		"RecentChange_save": "MainHandler",
		"RevisionDataUpdates": "MainHandler",
		"CodeEditorGetPageLanguage": "MediaWiki\\Extension\\DataMaps\\HookHandler::onCodeEditorGetPageLanguage"
	},
    "HookHandlers": {
        "MainHandler": {
            "class": "MediaWiki\\Extension\\DataMaps\\HookHandler"
        }
    },

	"DefaultUserOptions": {
		"datamaps-enable-visual-editor": true,
		"datamaps-opt-in-visual-editor-beta": false
	},

	"config_prefix": "wgDataMaps",
	"config": {
		"NamespaceId": {
			"description": "Namespace where data maps will be stored. Use 'managed' to use the built-in namespace.",
			"value": "managed"
		},
		"ApiCaching": {
			"value": {
				"type": -1,
				"ttl": 86400,
				"ttlExtensionThreshold": 43200,
				"ttlExtensionValue": 57600
			}
		},
		"DefaultApiMarkerBatch": {
			"value": 2500
		},
		"MaxApiMarkerBatch": {
			"value": 5000
		},
		"MarkerParserExpansionLimit": {
			"description": "Controls how big the parser output for a marker's description can get.",
			"value": 800
		},
		"UseInProcessParserCache": {
			"description": "If enabled, uses a simple wikitext parser cache inside the process handling the request.",
			"value": true
		},
		"ReportTimingInfo": {
			"description": "Attaches data map marker processing time in API requests.",
			"value": false
		},
		"FullLinksUpdateBudget": {
			"value": 0.5
		},
		"EnableVisualEditor": {
			"value": true
		},
		"EnableCreateMap": {
			"value": true
		},
		"EnableTransclusionAlias": {
			"value": true
		},
		"AllowExperimentalFeatures": {
			"description": "Whether to enable experimental features.",
			"value": false
		}
	},

	"manifest_version": 2
}
